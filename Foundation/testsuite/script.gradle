	model {
		components {
			TestApp(NativeLibrarySpec) {
				sources {
					cpp {
						source {
							srcDir 'src'
							include 'TestApp.cpp'
						}
						lib project: ':CppUnit', library: 'PocoCppUnit'
						lib project: ':Foundation', library: 'PocoFoundation'
					}
				}
			}
			TestLib(NativeLibrarySpec) {
				sources {
					cpp {
						source {
							srcDir 'src'
							include 'TestLibrary.cpp'
							include 'TestPlugin.cpp'
						}
						lib project: ':CppUnit', library: 'PocoCppUnit'
						lib project: ':Foundation', library: 'PocoFoundation'
					}
				}
			}
			FoundationTestRunner(NativeLibrarySpec) {
				sources {
					cpp {
						source {
							srcDir 'src'
							include '**/*.cpp'
							exclude 'WinDriver.cpp'
							exclude '*_WINCE.cpp'
							exclude 'TestApp*.cpp'
							exclude 'Driver.cpp'
						}
						exportedHeaders {
							srcDir 'src'
						}
						lib project: ':CppUnit', library: 'PocoCppUnit'
						lib project: ':Foundation', library: 'PocoFoundation'
					}
				}
			}
		}
		testSuites {
			FoundationTestSuite(CppUnitTestSuiteSpec) {
				testing $.components.FoundationTestRunner 
			}
		}
		binaries {
			withType(NativeExecutableSpec) {
				lib project: ':CppUnit', library: 'PocoCppUnit', linkage: 'shared'
				lib project: ':Foundation', library: 'PocoFoundation', linkage: 'shared'
			}
		    withType(CppUnitTestSuiteBinarySpec) {
				lib project: ':CppUnit', library: 'PocoCppUnit', linkage: 'shared'
				lib project: ':Foundation', library: 'PocoFoundation', linkage: 'shared'
			}
		}

	}
	tasks.withType(RunTestExecutable) {
		args "-print"
	}


